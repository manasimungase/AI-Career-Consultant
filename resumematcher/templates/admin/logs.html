<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Logs - ResumeMatcher</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --info-bg: rgba(52, 152, 219, 0.1);
            --warning-bg: rgba(241, 196, 15, 0.1);
            --error-bg: rgba(231, 76, 60, 0.1);
            --success-bg: rgba(46, 204, 113, 0.1);
        }
        
        .log-entry {
            border-radius: 8px;
            margin-bottom: 10px;
            padding: 15px;
            transition: transform 0.2s ease;
        }
        
        .log-entry:hover {
            transform: translateX(5px);
        }
        
        .log-info { background-color: var(--info-bg); }
        .log-warning { background-color: var(--warning-bg); }
        .log-error { background-color: var(--error-bg); }
        .log-success { background-color: var(--success-bg); }
        
        .filter-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .logs-container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }
        
        .timestamp {
            font-size: 0.8rem;
            color: #666;
        }
        
        .level-badge {
            font-size: 0.8rem;
            padding: 4px 8px;
            border-radius: 12px;
            font-weight: 500;
        }
        
        .badge-info { background-color: #3498db; color: white; }
        .badge-warning { background-color: #f1c40f; color: black; }
        .badge-error { background-color: #e74c3c; color: white; }
        .badge-success { background-color: #2ecc71; color: white; }
    </style>
</head>
<body class="bg-light">
    <div class="container-fluid py-4">
        <h2 class="mb-4">System Logs</h2>
        
        <!-- Filters -->
        <div class="filter-card">
            <form id="filterForm" class="row g-3">
                <div class="col-md-3">
                    <label class="form-label">Log Level</label>
                    <select class="form-select" name="level">
                        <option value="">All Levels</option>
                        <option value="info" {{ 'selected' if request.args.get('level') == 'info' }}>Info</option>
                        <option value="warning" {{ 'selected' if request.args.get('level') == 'warning' }}>Warning</option>
                        <option value="error" {{ 'selected' if request.args.get('level') == 'error' }}>Error</option>
                        <option value="success" {{ 'selected' if request.args.get('level') == 'success' }}>Success</option>
                    </select>
                </div>
                
                <div class="col-md-3">
                    <label class="form-label">Date Range</label>
                    <select class="form-select" name="date_range">
                        <option value="24h" {{ 'selected' if request.args.get('date_range') == '24h' }}>Last 24 Hours</option>
                        <option value="7d" {{ 'selected' if request.args.get('date_range') == '7d' }}>Last 7 Days</option>
                        <option value="30d" {{ 'selected' if request.args.get('date_range') == '30d' }}>Last 30 Days</option>
                        <option value="all" {{ 'selected' if request.args.get('date_range') == 'all' }}>All Time</option>
                    </select>
                </div>
                
                <div class="col-md-4">
                    <label class="form-label">Search</label>
                    <input type="text" class="form-control" name="search" value="{{ request.args.get('search', '') }}" placeholder="Search logs...">
                </div>
                
                <div class="col-md-2 d-flex align-items-end">
                    <button type="submit" class="btn btn-primary w-100">Apply Filters</button>
                </div>
            </form>
        </div>
        
        <!-- Logs -->
        <div class="logs-container">
            {% for log in logs %}
            <div class="log-entry log-{{ log.level }}">
                <div class="d-flex justify-content-between align-items-start mb-2">
                    <span class="level-badge badge-{{ log.level }}">{{ log.level.upper() }}</span>
                    <span class="timestamp">{{ log.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}</span>
                </div>
                <div class="log-message">{{ log.message }}</div>
                {% if log.details %}
                <div class="log-details mt-2">
                    <small class="text-muted">{{ log.details }}</small>
                </div>
                {% endif %}
            </div>
            {% endfor %}
            
            <!-- Pagination -->
            {% if total_pages > 1 %}
            <nav aria-label="Log navigation" class="mt-4">
                <ul class="pagination justify-content-center">
                    <li class="page-item {{ 'disabled' if current_page == 1 }}">
                        <a class="page-link" href="{{ url_for('admin_logs', page=current_page-1, **request.args) if current_page > 1 else '#' }}">Previous</a>
                    </li>
                    
                    {% for page in range(1, total_pages + 1) %}
                    <li class="page-item {{ 'active' if page == current_page }}">
                        <a class="page-link" href="{{ url_for('admin_logs', page=page, **request.args) }}">{{ page }}</a>
                    </li>
                    {% endfor %}
                    
                    <li class="page-item {{ 'disabled' if current_page == total_pages }}">
                        <a class="page-link" href="{{ url_for('admin_logs', page=current_page+1, **request.args) if current_page < total_pages else '#' }}">Next</a>
                    </li>
                </ul>
            </nav>
            {% endif %}
        </div>
    </div>
    
    <script>
        // Auto-submit form when filters change
        document.querySelectorAll('#filterForm select').forEach(select => {
            select.addEventListener('change', () => {
                document.getElementById('filterForm').submit();
            });
        });
    </script>
</body>
</html> 